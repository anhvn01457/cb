"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var r,a,n,o,i,s=gap,u=e[t];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,i=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,r=0;o>r;r+=1)i[r]=str(r,u)||"null";return n=0===i.length?"[]":gap?"[\n"+gap+i.join(",\n"+gap)+"\n"+s+"]":"["+i.join(",")+"]",gap=s,n}if(rep&&"object"==typeof rep)for(o=rep.length,r=0;o>r;r+=1)"string"==typeof rep[r]&&(a=rep[r],n=str(a,u),n&&i.push(quote(a)+(gap?": ":":")+n));else for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(n=str(a,u),n&&i.push(quote(a)+(gap?": ":":")+n));return n=0===i.length?"{}":gap?"{\n"+gap+i.join(",\n"+gap)+"\n"+s+"}":"{"+i.join(",")+"}",gap=s,n}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,r){var a;if(gap="",indent="","number"==typeof r)for(a=0;r>a;a+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var r,a,n=t[e];if(n&&"object"==typeof n)for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a=walk(n,r),void 0!==a?n[r]=a:delete n[r]);return reviver.call(t,e,n)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(t,e){"use strict";var r=t.History=t.History||{};if("undefined"!=typeof r.Adapter)throw new Error("History.js Adapter has already been loaded...");r.Adapter={handlers:{},_uid:1,uid:function(t){return t._uid||(t._uid=r.Adapter._uid++)},bind:function(t,e,a){var n=r.Adapter.uid(t);r.Adapter.handlers[n]=r.Adapter.handlers[n]||{},r.Adapter.handlers[n][e]=r.Adapter.handlers[n][e]||[],r.Adapter.handlers[n][e].push(a),t["on"+e]=function(t,e){return function(a){r.Adapter.trigger(t,e,a)}}(t,e)},trigger:function(t,e,a){a=a||{};var n,o,i=r.Adapter.uid(t);for(r.Adapter.handlers[i]=r.Adapter.handlers[i]||{},r.Adapter.handlers[i][e]=r.Adapter.handlers[i][e]||[],n=0,o=r.Adapter.handlers[i][e].length;o>n;++n)r.Adapter.handlers[i][e][n].apply(this,[a])},extractEventData:function(t,r){var a=r&&r[t]||e;return a},onDomLoad:function(e){var r=t.setTimeout(function(){e()},2e3);t.onload=function(){clearTimeout(r),e()}}},"undefined"!=typeof r.init&&r.init()}(window),function(t){"use strict";var e=t.document,r=t.setTimeout||r,a=t.clearTimeout||a,n=t.setInterval||n,o=t.History=t.History||{};if("undefined"!=typeof o.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");o.initHtml4=function(){return"undefined"!=typeof o.initHtml4.initialized?!1:(o.initHtml4.initialized=!0,o.enabled=!0,o.savedHashes=[],o.isLastHash=function(t){var e,r=o.getHashByIndex();return e=t===r},o.isHashEqual=function(t,e){return t=encodeURIComponent(t).replace(/%25/g,"%"),e=encodeURIComponent(e).replace(/%25/g,"%"),t===e},o.saveHash=function(t){return o.isLastHash(t)?!1:(o.savedHashes.push(t),!0)},o.getHashByIndex=function(t){var e=null;return e="undefined"==typeof t?o.savedHashes[o.savedHashes.length-1]:0>t?o.savedHashes[o.savedHashes.length+t]:o.savedHashes[t]},o.discardedHashes={},o.discardedStates={},o.discardState=function(t,e,r){var a,n=o.getHashByState(t);return a={discardedState:t,backState:r,forwardState:e},o.discardedStates[n]=a,!0},o.discardHash=function(t,e,r){var a={discardedHash:t,backState:r,forwardState:e};return o.discardedHashes[t]=a,!0},o.discardedState=function(t){var e,r=o.getHashByState(t);return e=o.discardedStates[r]||!1},o.discardedHash=function(t){var e=o.discardedHashes[t]||!1;return e},o.recycleState=function(t){var e=o.getHashByState(t);return o.discardedState(t)&&delete o.discardedStates[e],!0},o.emulated.hashChange&&(o.hashChangeInit=function(){o.checkerFunction=null;var r,a,i,s,u="",l=Boolean(o.getHash());return o.isInternetExplorer()?(r="historyjs-iframe",a=e.createElement("iframe"),a.setAttribute("id",r),a.setAttribute("src","#"),a.style.display="none",e.body.appendChild(a),a.contentWindow.document.open(),a.contentWindow.document.close(),i="",s=!1,o.checkerFunction=function(){if(s)return!1;s=!0;var e=o.getHash(),r=o.getHash(a.contentWindow.document);return e!==u?(u=e,r!==e&&(i=r=e,a.contentWindow.document.open(),a.contentWindow.document.close(),a.contentWindow.document.location.hash=o.escapeHash(e)),o.Adapter.trigger(t,"hashchange")):r!==i&&(i=r,l&&""===r?o.back():o.setHash(r,!1)),s=!1,!0}):o.checkerFunction=function(){var e=o.getHash()||"";return e!==u&&(u=e,o.Adapter.trigger(t,"hashchange")),!0},o.intervalList.push(n(o.checkerFunction,o.options.hashChangeInterval)),!0},o.Adapter.onDomLoad(o.hashChangeInit)),o.emulated.pushState&&(o.onHashChange=function(e){var r,a=e&&e.newURL||o.getLocationHref(),n=o.getHashByUrl(a),i=null,s=null;return o.isLastHash(n)?(o.busy(!1),!1):(o.doubleCheckComplete(),o.saveHash(n),n&&o.isTraditionalAnchor(n)?(o.Adapter.trigger(t,"anchorchange"),o.busy(!1),!1):(i=o.extractState(o.getFullUrl(n||o.getLocationHref()),!0),o.isLastSavedState(i)?(o.busy(!1),!1):(s=o.getHashByState(i),(r=o.discardedState(i))?(o.getHashByIndex(-2)===o.getHashByState(r.forwardState)?o.back(!1):o.forward(!1),!1):(o.pushState(i.data,i.title,encodeURI(i.url),!1),!0))))},o.Adapter.bind(t,"hashchange",o.onHashChange),o.pushState=function(e,r,a,n){if(a=encodeURI(a).replace(/%25/g,"%"),o.getHashByUrl(a))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(n!==!1&&o.busy())return o.pushQueue({scope:o,callback:o.pushState,args:arguments,queue:n}),!1;o.busy(!0);var i=o.createStateObject(e,r,a),s=o.getHashByState(i),u=o.getState(!1),l=o.getHashByState(u),d=o.getHash(),c=o.expectedStateId==i.id;return o.storeState(i),o.expectedStateId=i.id,o.recycleState(i),o.setTitle(i),s===l?(o.busy(!1),!1):(o.saveState(i),c||o.Adapter.trigger(t,"statechange"),o.isHashEqual(s,d)||o.isHashEqual(s,o.getShortUrl(o.getLocationHref()))||o.setHash(s,!1),o.busy(!1),!0)},o.replaceState=function(e,r,a,n){if(a=encodeURI(a).replace(/%25/g,"%"),o.getHashByUrl(a))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(n!==!1&&o.busy())return o.pushQueue({scope:o,callback:o.replaceState,args:arguments,queue:n}),!1;o.busy(!0);var i=o.createStateObject(e,r,a),s=o.getHashByState(i),u=o.getState(!1),l=o.getHashByState(u),d=o.getStateByIndex(-2);return o.discardState(u,i,d),s===l?(o.storeState(i),o.expectedStateId=i.id,o.recycleState(i),o.setTitle(i),o.saveState(i),o.Adapter.trigger(t,"statechange"),o.busy(!1)):o.pushState(i.data,i.title,i.url,!1),!0}),o.emulated.pushState&&o.getHash()&&!o.emulated.hashChange&&o.Adapter.onDomLoad(function(){o.Adapter.trigger(t,"hashchange")}),void 0)},"undefined"!=typeof o.init&&o.init()}(window),function(t,e){"use strict";var r=t.console||e,a=t.document,n=t.navigator,o=t.sessionStorage||!1,i=t.setTimeout,s=t.clearTimeout,u=t.setInterval,l=t.clearInterval,d=t.JSON,c=t.alert,p=t.History=t.History||{},f=t.history;try{o.setItem("TEST","1"),o.removeItem("TEST")}catch(h){o=!1}if(d.stringify=d.stringify||d.encode,d.parse=d.parse||d.decode,"undefined"!=typeof p.init)throw new Error("History.js Core has already been loaded...");p.init=function(){return"undefined"==typeof p.Adapter?!1:("undefined"!=typeof p.initCore&&p.initCore(),"undefined"!=typeof p.initHtml4&&p.initHtml4(),!0)},p.initCore=function(){if("undefined"!=typeof p.initCore.initialized)return!1;if(p.initCore.initialized=!0,p.options=p.options||{},p.options.hashChangeInterval=p.options.hashChangeInterval||100,p.options.safariPollInterval=p.options.safariPollInterval||500,p.options.doubleCheckInterval=p.options.doubleCheckInterval||500,p.options.disableSuid=p.options.disableSuid||!1,p.options.storeInterval=p.options.storeInterval||1e3,p.options.busyDelay=p.options.busyDelay||250,p.options.debug=p.options.debug||!1,p.options.initialTitle=p.options.initialTitle||a.title,p.options.html4Mode=p.options.html4Mode||!1,p.options.delayInit=p.options.delayInit||!1,p.intervalList=[],p.clearAllIntervals=function(){var t,e=p.intervalList;if("undefined"!=typeof e&&null!==e){for(t=0;t<e.length;t++)l(e[t]);p.intervalList=null}},p.debug=function(){p.options.debug&&p.log.apply(p,arguments)},p.log=function(){var t,e,n,o,i,s=!("undefined"==typeof r||"undefined"==typeof r.log||"undefined"==typeof r.log.apply),u=a.getElementById("log");for(s?(o=Array.prototype.slice.call(arguments),t=o.shift(),"undefined"!=typeof r.debug?r.debug.apply(r,[t,o]):r.log.apply(r,[t,o])):t="\n"+arguments[0]+"\n",e=1,n=arguments.length;n>e;++e){if(i=arguments[e],"object"==typeof i&&"undefined"!=typeof d)try{i=d.stringify(i)}catch(l){}t+="\n"+i+"\n"}return u?(u.value+=t+"\n-----\n",u.scrollTop=u.scrollHeight-u.clientHeight):s||c(t),!0},p.getInternetExplorerMajorVersion=function(){var t=p.getInternetExplorerMajorVersion.cached="undefined"!=typeof p.getInternetExplorerMajorVersion.cached?p.getInternetExplorerMajorVersion.cached:function(){for(var t=3,e=a.createElement("div"),r=e.getElementsByTagName("i");(e.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->")&&r[0];);return t>4?t:!1}();return t},p.isInternetExplorer=function(){var t=p.isInternetExplorer.cached="undefined"!=typeof p.isInternetExplorer.cached?p.isInternetExplorer.cached:Boolean(p.getInternetExplorerMajorVersion());return t},p.emulated=p.options.html4Mode?{pushState:!0,hashChange:!0}:{pushState:!Boolean(t.history&&t.history.pushState&&t.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(n.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(n.userAgent))),hashChange:Boolean(!("onhashchange"in t||"onhashchange"in a)||p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8)},p.enabled=!p.emulated.pushState,p.bugs={setHash:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===n.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(n.userAgent)),safariPoll:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===n.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(n.userAgent)),ieDoubleCheck:Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<7)},p.isEmptyObject=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},p.cloneObject=function(t){var e,r;return t?(e=d.stringify(t),r=d.parse(e)):r={},r},p.getRootUrl=function(){var t=a.location.protocol+"//"+(a.location.hostname||a.location.host);return a.location.port&&(t+=":"+a.location.port),t+="/"},p.getBaseHref=function(){var t=a.getElementsByTagName("base"),e=null,r="";return 1===t.length&&(e=t[0],r=e.href.replace(/[^\/]+$/,"")),r=r.replace(/\/+$/,""),r&&(r+="/"),r},p.getBaseUrl=function(){var t=p.getBaseHref()||p.getBasePageUrl()||p.getRootUrl();return t},p.getPageUrl=function(){var t,e=p.getState(!1,!1),r=(e||{}).url||p.getLocationHref();return t=r.replace(/\/+$/,"").replace(/[^\/]+$/,function(t){return/\./.test(t)?t:t+"/"})},p.getBasePageUrl=function(){var t=p.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(t){return/[^\/]$/.test(t)?"":t}).replace(/\/+$/,"")+"/";return t},p.getFullUrl=function(t,e){var r=t,a=t.substring(0,1);return e="undefined"==typeof e?!0:e,/[a-z]+\:\/\//.test(t)||(r="/"===a?p.getRootUrl()+t.replace(/^\/+/,""):"#"===a?p.getPageUrl().replace(/#.*/,"")+t:"?"===a?p.getPageUrl().replace(/[\?#].*/,"")+t:e?p.getBaseUrl()+t.replace(/^(\.\/)+/,""):p.getBasePageUrl()+t.replace(/^(\.\/)+/,"")),r.replace(/\#$/,"")},p.getShortUrl=function(t){var e=t,r=p.getBaseUrl(),a=p.getRootUrl();return p.emulated.pushState&&(e=e.replace(r,"")),e=e.replace(a,"/"),e="./"+e,e=e.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},p.getLocationHref=function(t){return t=t||a,t.URL===t.location.href?t.location.href:t.location.href===decodeURIComponent(t.URL)?t.URL:t.location.hash&&decodeURIComponent(t.location.href.replace(/^[^#]+/,""))===t.location.hash?t.location.href:-1==t.URL.indexOf("#")&&-1!=t.location.href.indexOf("#")?t.location.href:t.URL||t.location.href},p.store={},p.idToState=p.idToState||{},p.stateToId=p.stateToId||{},p.urlToId=p.urlToId||{},p.storedStates=p.storedStates||[],p.savedStates=p.savedStates||[],p.normalizeStore=function(){p.store.idToState=p.store.idToState||{},p.store.urlToId=p.store.urlToId||{},p.store.stateToId=p.store.stateToId||{}},p.getState=function(t,e){"undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=!0);var r=p.getLastSavedState();return!r&&e&&(r=p.createStateObject()),t&&(r=p.cloneObject(r),r.url=r.cleanUrl||r.url),r},p.getIdByState=function(t){var e,r=p.extractId(t.url);if(!r)if(e=p.getStateString(t),"undefined"!=typeof p.stateToId[e])r=p.stateToId[e];else if("undefined"!=typeof p.store.stateToId[e])r=p.store.stateToId[e];else{for(;;)if(r=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"==typeof p.idToState[r]&&"undefined"==typeof p.store.idToState[r])break;p.stateToId[e]=r,p.idToState[r]=t}return r},p.normalizeState=function(t){var e,r;return t&&"object"==typeof t||(t={}),"undefined"!=typeof t.normalized?t:(t.data&&"object"==typeof t.data||(t.data={}),e={},e.normalized=!0,e.title=t.title||"",e.url=p.getFullUrl(t.url?t.url:p.getLocationHref()),e.hash=p.getShortUrl(e.url),e.data=p.cloneObject(t.data),e.id=p.getIdByState(e),e.cleanUrl=e.url.replace(/\??\&_suid.*/,""),e.url=e.cleanUrl,r=!p.isEmptyObject(e.data),(e.title||r)&&p.options.disableSuid!==!0&&(e.hash=p.getShortUrl(e.url).replace(/\??\&_suid.*/,""),/\?/.test(e.hash)||(e.hash+="?"),e.hash+="&_suid="+e.id),e.hashedUrl=p.getFullUrl(e.hash),(p.emulated.pushState||p.bugs.safariPoll)&&p.hasUrlDuplicate(e)&&(e.url=e.hashedUrl),e)},p.createStateObject=function(t,e,r){var a={data:t,title:e,url:r};return a=p.normalizeState(a)},p.getStateById=function(t){t=String(t);var r=p.idToState[t]||p.store.idToState[t]||e;return r},p.getStateString=function(t){var e,r,a;return e=p.normalizeState(t),r={data:e.data,title:t.title,url:t.url},a=d.stringify(r)},p.getStateId=function(t){var e,r;return e=p.normalizeState(t),r=e.id},p.getHashByState=function(t){var e,r;return e=p.normalizeState(t),r=e.hash},p.extractId=function(t){var e,r,a,n;return n=-1!=t.indexOf("#")?t.split("#")[0]:t,r=/(.*)\&_suid=([0-9]+)$/.exec(n),a=r?r[1]||t:t,e=r?String(r[2]||""):"",e||!1},p.isTraditionalAnchor=function(t){var e=!/[\/\\.]/.test(t);return e},p.extractState=function(t,e){var r,a,n=null;return e=e||!1,r=p.extractId(t),r&&(n=p.getStateById(r)),n||(a=p.getFullUrl(t),r=p.getIdByUrl(a)||!1,r&&(n=p.getStateById(r)),n||!e||p.isTraditionalAnchor(t)||(n=p.createStateObject(null,null,a))),n},p.getIdByUrl=function(t){var r=p.urlToId[t]||p.store.urlToId[t]||e;return r},p.getLastSavedState=function(){return p.savedStates[p.savedStates.length-1]||e},p.getLastStoredState=function(){return p.storedStates[p.storedStates.length-1]||e},p.hasUrlDuplicate=function(t){var e,r=!1;return e=p.extractState(t.url),r=e&&e.id!==t.id},p.storeState=function(t){return p.urlToId[t.url]=t.id,p.storedStates.push(p.cloneObject(t)),t},p.isLastSavedState=function(t){var e,r,a,n=!1;return p.savedStates.length&&(e=t.id,r=p.getLastSavedState(),a=r.id,n=e===a),n},p.saveState=function(t){return p.isLastSavedState(t)?!1:(p.savedStates.push(p.cloneObject(t)),!0)},p.getStateByIndex=function(t){var e=null;return e="undefined"==typeof t?p.savedStates[p.savedStates.length-1]:0>t?p.savedStates[p.savedStates.length+t]:p.savedStates[t]},p.getCurrentIndex=function(){var t=null;return t=p.savedStates.length<1?0:p.savedStates.length-1},p.getHash=function(t){var e,r=p.getLocationHref(t);return e=p.getHashByUrl(r)},p.unescapeHash=function(t){var e=p.normalizeHash(t);return e=decodeURIComponent(e)},p.normalizeHash=function(t){var e=t.replace(/[^#]*#/,"").replace(/#.*/,"");return e},p.setHash=function(t,e){var r,n;return e!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.setHash,args:arguments,queue:e}),!1):(p.busy(!0),r=p.extractState(t,!0),r&&!p.emulated.pushState?p.pushState(r.data,r.title,r.url,!1):p.getHash()!==t&&(p.bugs.setHash?(n=p.getPageUrl(),p.pushState(null,null,n+"#"+t,!1)):a.location.hash=t),p)},p.escapeHash=function(e){var r=p.normalizeHash(e);return r=t.encodeURIComponent(r),p.bugs.hashEscape||(r=r.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),r},p.getHashByUrl=function(t){var e=String(t).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return e=p.unescapeHash(e)},p.setTitle=function(t){var e,r=t.title;r||(e=p.getStateByIndex(0),e&&e.url===t.url&&(r=e.title||p.options.initialTitle));try{a.getElementsByTagName("title")[0].innerHTML=r.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(n){}return a.title=r,p},p.queues=[],p.busy=function(t){if("undefined"!=typeof t?p.busy.flag=t:"undefined"==typeof p.busy.flag&&(p.busy.flag=!1),!p.busy.flag){s(p.busy.timeout);var e=function(){var t,r,a;if(!p.busy.flag)for(t=p.queues.length-1;t>=0;--t)r=p.queues[t],0!==r.length&&(a=r.shift(),p.fireQueueItem(a),p.busy.timeout=i(e,p.options.busyDelay))};p.busy.timeout=i(e,p.options.busyDelay)}return p.busy.flag},p.busy.flag=!1,p.fireQueueItem=function(t){return t.callback.apply(t.scope||p,t.args||[])},p.pushQueue=function(t){return p.queues[t.queue||0]=p.queues[t.queue||0]||[],p.queues[t.queue||0].push(t),p},p.queue=function(t,e){return"function"==typeof t&&(t={callback:t}),"undefined"!=typeof e&&(t.queue=e),p.busy()?p.pushQueue(t):p.fireQueueItem(t),p},p.clearQueue=function(){return p.busy.flag=!1,p.queues=[],p},p.stateChanged=!1,p.doubleChecker=!1,p.doubleCheckComplete=function(){return p.stateChanged=!0,p.doubleCheckClear(),p},p.doubleCheckClear=function(){return p.doubleChecker&&(s(p.doubleChecker),p.doubleChecker=!1),p},p.doubleCheck=function(t){return p.stateChanged=!1,p.doubleCheckClear(),p.bugs.ieDoubleCheck&&(p.doubleChecker=i(function(){return p.doubleCheckClear(),p.stateChanged||t(),!0},p.options.doubleCheckInterval)),p},p.safariStatePoll=function(){var e,r=p.extractState(p.getLocationHref());if(!p.isLastSavedState(r))return e=r,e||(e=p.createStateObject()),p.Adapter.trigger(t,"popstate"),p},p.back=function(t){return t!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.back,args:arguments,queue:t}),!1):(p.busy(!0),p.doubleCheck(function(){p.back(!1)}),f.go(-1),!0)},p.forward=function(t){return t!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.forward,args:arguments,queue:t}),!1):(p.busy(!0),p.doubleCheck(function(){p.forward(!1)}),f.go(1),!0)},p.go=function(t,e){var r;if(t>0)for(r=1;t>=r;++r)p.forward(e);else{if(!(0>t))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(r=-1;r>=t;--r)p.back(e)}return p},p.emulated.pushState){var h=function(){};p.pushState=p.pushState||h,p.replaceState=p.replaceState||h}else p.onPopState=function(e,r){var a,n,o=!1,i=!1;return p.doubleCheckComplete(),(a=p.getHash())?(n=p.extractState(a||p.getLocationHref(),!0),n?p.replaceState(n.data,n.title,n.url,!1):(p.Adapter.trigger(t,"anchorchange"),p.busy(!1)),p.expectedStateId=!1,!1):(o=p.Adapter.extractEventData("state",e,r)||!1,i=o?p.getStateById(o):p.expectedStateId?p.getStateById(p.expectedStateId):p.extractState(p.getLocationHref()),i||(i=p.createStateObject(null,null,p.getLocationHref())),p.expectedStateId=!1,p.isLastSavedState(i)?(p.busy(!1),!1):(p.storeState(i),p.saveState(i),p.setTitle(i),p.Adapter.trigger(t,"statechange"),p.busy(!1),!0))},p.Adapter.bind(t,"popstate",p.onPopState),p.pushState=function(e,r,a,n){if(p.getHashByUrl(a)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(n!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.pushState,args:arguments,queue:n}),!1;p.busy(!0);var o=p.createStateObject(e,r,a);return p.isLastSavedState(o)?p.busy(!1):(p.storeState(o),p.expectedStateId=o.id,f.pushState(o.id,o.title,o.url),p.Adapter.trigger(t,"popstate")),!0},p.replaceState=function(e,r,a,n){if(p.getHashByUrl(a)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(n!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.replaceState,args:arguments,queue:n}),!1;p.busy(!0);var o=p.createStateObject(e,r,a);return p.isLastSavedState(o)?p.busy(!1):(p.storeState(o),p.expectedStateId=o.id,f.replaceState(o.id,o.title,o.url),p.Adapter.trigger(t,"popstate")),!0};if(o){try{p.store=d.parse(o.getItem("History.store"))||{}}catch(g){p.store={}}p.normalizeStore()}else p.store={},p.normalizeStore();p.Adapter.bind(t,"unload",p.clearAllIntervals),p.saveState(p.storeState(p.extractState(p.getLocationHref(),!0))),o&&(p.onUnload=function(){var t,e,r;try{t=d.parse(o.getItem("History.store"))||{}}catch(a){t={}}t.idToState=t.idToState||{},t.urlToId=t.urlToId||{},t.stateToId=t.stateToId||{};for(e in p.idToState)p.idToState.hasOwnProperty(e)&&(t.idToState[e]=p.idToState[e]);for(e in p.urlToId)p.urlToId.hasOwnProperty(e)&&(t.urlToId[e]=p.urlToId[e]);for(e in p.stateToId)p.stateToId.hasOwnProperty(e)&&(t.stateToId[e]=p.stateToId[e]);p.store=t,p.normalizeStore(),r=d.stringify(t);try{o.setItem("History.store",r)}catch(n){if(n.code!==DOMException.QUOTA_EXCEEDED_ERR)throw n;o.length&&(o.removeItem("History.store"),o.setItem("History.store",r))}},p.intervalList.push(u(p.onUnload,p.options.storeInterval)),p.Adapter.bind(t,"beforeunload",p.onUnload),p.Adapter.bind(t,"unload",p.onUnload)),p.emulated.pushState||(p.bugs.safariPoll&&p.intervalList.push(u(p.safariStatePoll,p.options.safariPollInterval)),("Apple Computer, Inc."===n.vendor||"Mozilla"===(n.appCodeName||""))&&(p.Adapter.bind(t,"hashchange",function(){p.Adapter.trigger(t,"popstate")}),p.getHash()&&p.Adapter.onDomLoad(function(){p.Adapter.trigger(t,"hashchange")})))},p.options&&p.options.delayInit||p.init()}(window),function(){var t;t=function(){function t(t){this.options=null!=t?t:{}}return t.prototype.call=function(t,e){var r;return r=this,null!=this.redirected?(this.redirected=null,void 0):(r._loading(t,e),$.ajax({url:e.url,headers:{"X-Wiselinks":e.data.render,"X-Wiselinks-Referer":e.data.referer},dataType:"html"}).done(function(a,n,o){var i,s;return s=r._normalize(o.getResponseHeader("X-Wiselinks-Url")),i=o.getResponseHeader("X-Wiselinks-Assets-Digest"),r._assets_changed(i)?window.location.reload(!0):(e=History.getState(),null!=s&&s!==r._normalize(e.url)&&r._redirect_to(s,t,e,o),t.html(a),r._title(o.getResponseHeader("X-Wiselinks-Title")),r._done(t,n,e,a))}).fail(function(a,n,o){return r._fail(t,n,e,o)}).always(function(a,n){return r._always(t,n,e)}))},t.prototype._normalize=function(t){return null!=t?t=t.replace(/\/+$/,""):void 0},t.prototype._assets_changed=function(t){return null!=this.options.assets_digest&&this.options.assets_digest!==t},t.prototype._redirect_to=function(t,e,r,a){return a&&a.readyState<4&&(a.onreadystatechange=$.noop,a.abort()),this.redirected=!0,$(document).trigger("page:redirected",[e,r.data.render,t]),History.replaceState(r.data,document.title,t)},t.prototype._loading=function(t,e){return $(document).trigger("page:loading",[t,e.data.render,decodeURI(e.url)])},t.prototype._done=function(t,e,r,a){return $(document).trigger("page:done",[t,e,decodeURI(r.url),a])},t.prototype._fail=function(t,e,r,a){return $(document).trigger("page:fail",[t,e,decodeURI(r.url),a])},t.prototype._always=function(t,e,r){return $(document).trigger("page:always",[t,e,decodeURI(r.url)])},t.prototype._title=function(t){return null!=t?($(document).trigger("page:title",decodeURI(t)),document.title=decodeURI(t)):void 0},t}(),void 0===window._Wiselinks&&(window._Wiselinks={}),window._Wiselinks.RequestManager=t}.call(this),function(){var t;t=function(){function t(t,e){var r;this.$target=t,this.options=e,r=this,this.template_id=(new Date).getTime(),this.request_manager=new _Wiselinks.RequestManager(this.options),r._try_target(this.$target),History.emulated.pushState&&this.options.html4===!0&&-1===window.location.href.indexOf("#.")&&this.options.html4_normalize_path===!0&&window.location.pathname!==this.options.html4_root_path&&(window.location.href=""+window.location.protocol+"//"+window.location.host+this.options.html4_root_path+"#."+window.location.pathname),History.Adapter.bind(window,"statechange",function(){var t;return t=History.getState(),r._template_id_changed(t)?r._call(r._reset_state(t)):r._call(t)}),$(document).on("click","a[data-push], a[data-replace]",function(t){var e;return(e=new _Wiselinks.Link(r,$(this))).allows_process(t)?(t.preventDefault(),e.process(),!1):void 0}),$(document).on("submit","form[data-push], form[data-replace]",function(t){var e;return(e=new _Wiselinks.Form(r,$(this)))?(t.preventDefault(),e.process(),!1):void 0})}return t.prototype.load=function(t,e,r){return null==r&&(r="template"),"partial"!==r&&(this.template_id=(new Date).getTime()),null!=e&&this._try_target($(e)),History.pushState({timestamp:(new Date).getTime(),template_id:this.template_id,render:r,target:e,referer:window.location.href},document.title,t)},t.prototype.reload=function(){return History.replaceState({timestamp:(new Date).getTime(),template_id:this.template_id,render:"template",referer:window.location.href},document.title,History.getState().url)},t.prototype._call=function(t){var e;return e=null!=t.data.target?$(t.data.target):this.$target,this.request_manager.call(e,t)},t.prototype._template_id_changed=function(t){return null==t.data.template_id||t.data.template_id!==this.template_id},t.prototype._make_state=function(t,e,r,a){return null==r&&(r="template"),{url:t,data:{target:e,render:r,referer:a}}},t.prototype._reset_state=function(t){return null==t.data&&(t.data={}),t.data.target=null,t.data.render="template",t},t.prototype._try_target=function(t){if(0===t.length&&"exception"===this.options.target_missing)throw new Error("[Wiselinks] Target missing: `"+t.selector+"`")},t}(),void 0===window._Wiselinks&&(window._Wiselinks={}),window._Wiselinks.Page=t}.call(this),function(){var t;t=function(){function t(t,e){this.page=t,this.$link=e}return t.prototype.allows_process=function(t){return!(this._cross_origin_link(t.currentTarget)||this._non_standard_click(t))},t.prototype.process=function(){var t;return t="partial"===this.$link.data("push")?"partial":"template",this.page.load(this.$link.attr("href"),this.$link.data("target"),t)},t.prototype._cross_origin_link=function(t){return this._different_protocol(t)||this._different_host(t)||this._different_port(t)},t.prototype._different_protocol=function(t){return location.protocol!==t.protocol},t.prototype._different_host=function(t){return location.host.split(":")[0]!==t.host.split(":")[0]},t.prototype._different_port=function(t){var e;return e=location.port===t.port||""===location.port&&"80"===t.port,!e},t.prototype._non_standard_click=function(t){return t.metaKey||t.ctrlKey||t.shiftKey||t.altKey},t}(),void 0===window._Wiselinks&&(window._Wiselinks={}),window._Wiselinks.Link=t}.call(this),function(){var t;t=function(){function t(t,e){this.page=t,this.$form=e}return t.prototype.process=function(){var t;return t=this,t._include_blank_url_params()?t.page.load(t._url(),t._target(),t._type()):t._without_blank_url_params(function(){return t.page.load(t._url(),t._target(),t._type())})},t.prototype._without_blank_url_params=function(t){var e,r;return r="select:not(:disabled),input:not(:disabled)",e=this.$form.find(r).filter(function(){return!$(this).val()}),e.attr("disabled",!0),t(),e.attr("disabled",!1)},t.prototype._params=function(){var t,e,r,a,n,o;for(t={},o=this.$form.serializeArray(),a=0,n=o.length;n>a;a++)e=o[a],"utf8"!==e.name&&(r=-1!==e.name.indexOf("[]",e.name.length-"[]".length)?e.name.substr(0,e.name.length-2):e.name,t[r]=null!=t[r]?t[r]+(","+e.value):e.value);return t},t.prototype._include_blank_url_params=function(){return this.$form.data("include-blank-url-params")===!0},t.prototype._optimize_url_params=function(){return this.$form.data("optimize-url-params")!==!1},t.prototype._type=function(){return"partial"===this.$form.data("push")?"partial":"template"},t.prototype._target=function(){return this.$form.data("target")},t.prototype._url=function(){var t,e,r,a,n,o;return r=this,a=function(){var a;if(r._optimize_url_params()){e=[],a=this._params();for(t in a)o=a[t],e.push(""+t+"="+encodeURIComponent(o));return e.join("&")}return this.$form.serialize()}.call(this),n=this.$form.attr("action"),a.length>0&&(n+="?"+a),n},t}(),null==window._Wiselinks&&(window._Wiselinks={}),window._Wiselinks.Form=t}.call(this),function(){var t;t=function(){function t(t,e){null==t&&(t=$("body")),this.options=null!=e?e:{},this._try_jquery(),this.options=$.extend(this._defaults(),this.options),this.enabled()&&(this.options.disable_suid&&(History.options.disableSuid=!0),this.page=new _Wiselinks.Page(t,this.options))}return t.prototype.enabled=function(){return!History.emulated.pushState||this.options.html4===!0},t.prototype.load=function(t,e,r){return null==r&&(r="template"),this.page.load(t,e,r)},t.prototype.reload=function(){return this.page.reload()},t.prototype._defaults=function(){return{disable_suid:!0,html4:!0,html4_root_path:"/",html4_normalize_path:!0,target_missing:null,assets_digest:$("meta[name='assets-digest']").attr("content")}},t.prototype._try_jquery=function(){if(null==window.jQuery)throw new Error("[Wiselinks] jQuery is not loaded")},t}(),window.Wiselinks=t}.call(this);